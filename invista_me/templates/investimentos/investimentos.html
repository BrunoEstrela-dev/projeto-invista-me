{% extends 'investimentos/base.html' %}
{% block conteudo %}
<h1 style="text-align: center;">Listagem de Investimentos</h1>
<div class="container">
    <button class="btn btn-success" style="margin-bottom: 20px; margin-top: 50px;"><a style="color: white;" href="{% url 'novo_investimento' %}">Novo Investimento</a></button>
    <table class="table table-striped table-bordered">
        <tr style="text-align: center;">
            <th>ID</th>
            <th>INVESTIMENTO</th>
            <th>VALOR</th>
            <th></th>
            <th></th>
            <th></th>
        </tr>
        {% for dado in dados %}
        <tr style="text-align: center;">
            <td>{{dado.id}}</td>
            <td>{{dado.investimento}}</td>
            <td>{{dado.valor}}</td>
            <td><button class="btn btn-info"><a style="color: white;" href="{% url 'detalhe' dado.id %}">Detalhe</a></button></td>
            <td><button class="btn btn-warning"><a style="color: white;" href="{% url 'editar' dado.id %}">Editar</a></button></td>
            <td>
                <!-- Botão que abre o modal -->
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#confirmarExclusaoModal{{dado.id}}">
                    Excluir
                </button>
            </td>
        </tr>

        <!-- Modal de confirmação para este item -->
        <div class="modal fade" id="confirmarExclusaoModal{{dado.id}}" tabindex="-1" role="dialog" aria-labelledby="modalLabel{{dado.id}}" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <form method="POST" action="{% url 'excluir' dado.id %}">
                {% csrf_token %}
                <div class="modal-header position-relative" style="display: block;">
                  <button type="button" class="close position-absolute" style="right: 1rem;top: 1rem;" data-dismiss="modal" aria-label="Fechar">
                    <span aria-hidden="true">&times;</span>
                  </button>
                  <div class="w-100 text-center">
                    <h5 class="modal-title" id="modalLabel{{dado.id}}">Confirmar Exclusão</h5>
                  </div>
                </div>
                <div class="modal-body text-center">
                  <p>Deseja excluir o item <strong>{{ dado.investimento }}</strong>?</p>
                </div>
                <div class="modal-footer justify-content-center">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                  <button type="submit" class="btn btn-danger">Confirmar</button>
                </div>
              </form>
            </div>
        </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}